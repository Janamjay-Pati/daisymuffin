<mat-toolbar color="primary">
  <span style="text-align: center; width: 100%;">Library</span>
</mat-toolbar>

<div class="carousel" (mouseenter)="pause()" (mouseleave)="resume()">
  <div class="carousel-track">
    <ng-container *ngFor="let img of images; let i = index">
      <div
        class="carousel-slide"
        [class.active]="current() === i"
        [class.prev]="i === (current() - 1 + images.length) % images.length"
        [class.next]="i === (current() + 1) % images.length"
        [attr.data-caption]="'Edit The Book'"
        (click)="editTheBook(i)"
      >
        <img
          class="carousel-image"
          [attr.src]="img"
          [attr.alt]="'slide-' + i"
          loading="lazy"
        />
      </div>
    </ng-container>
  </div>

  <button class="nav prev" (click)="prev()" aria-label="Previous">‹</button>
  <button class="nav next" (click)="next()" aria-label="Next">›</button>

  <div class="indicators">
    <button *ngFor="let _ of images; let i = index"
            (click)="goTo(i)"
            [class.active]="current() === i"
            aria-label="Go to slide {{i}}"></button>
  </div>
</div>

<mat-toolbar color="primary">
  <span style="text-align: center; width: 100%;">Weekly Insights</span>
</mat-toolbar>

<div class="graph-section">
  <word-graph [raw]="writingRows"></word-graph>
</div>

<mat-toolbar color="primary">
  <span style="text-align: center; width: 100%;">Add New Book</span>
</mat-toolbar>

<div class="add-book-container">
  <div class="add-book-section">
    <div class="form-container">
        <div class="image-section image-wrapper">
        <img class="image" [src]="newBookImage" loading="lazy" />

        <!-- Upload overlay -->
        <button
            mat-icon-button
            class="edit-image-btn"
            type="button"
            (click)="fileInput.click()"
            matTooltip="Change image"
        >
            <mat-icon>upload</mat-icon>
        </button>

        <!-- Hidden file input -->
        <input
            type="file"
            accept="image/*"
            hidden
            #fileInput
            (change)="onImageSelected($event)"
        />
        </div>
        <div class="input-section">
            <mat-form-field>
                <mat-label>Book Name</mat-label>
                <input matInput placeholder="Book Name*" [(ngModel)]="newBookName" />
            </mat-form-field>
            <mat-form-field>
                <mat-label>Description</mat-label>
                <textarea matInput placeholder="Description" [(ngModel)]="newBookDescription"></textarea>
            </mat-form-field>
        </div>
    </div>
    <div class="add-button-section">
        <button mat-raised-button color="primary" (click)="addNewBook()" [disabled]="!newBookName">Add Book</button>
    </div>
  </div>
</div>